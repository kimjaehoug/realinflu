# 절기별 데이터 처리 정상 콘솔 로그 예시

## 1. CSV 데이터 로드 단계

```
📂 [useInfluenzaData] CSV 데이터 로드 시작 (2017년 36주 ~ 2025년 47주)
📂 [CSV 로더] CSV 데이터 로드 시작: { dsid: 'ds_0101' }
📂 [CSV 로더] 2017년 데이터: 280건 (파일: flu-0101-2017.csv, 필터링: 36주 이상)
📂 [CSV 로더] 2018년 데이터: 364건 (파일: flu-0101-2018.csv, 필터링: 전체)
📂 [CSV 로더] 2019년 데이터: 364건 (파일: flu-0101-2019.csv, 필터링: 전체)
...
📂 [CSV 로더] 2025년 데이터: 280건 (파일: flu-0101-2025.csv, 필터링: 47주 이하)
📂 [CSV 로더] CSV 데이터 로드 완료: 총 2800건 (2017년 36주 ~ 2025년 47주)
📂 [CSV 로더] CSV 데이터 샘플: [
  { 연도: '2017', 주차: '36', 연령대: '65세이상', 의사환자 분율: '2.1' },
  { 연도: '2017', 주차: '36', 연령대: '50-64세', 의사환자 분율: '2.9' },
  ...
]
📂 [useInfluenzaData] CSV 데이터 변환 완료: {
  원본건수: 2800,
  변환건수: 2800,
  샘플: [
    {
      id: 'csv_0',
      dsId: 'ds_0101',
      parsedData: '[{"연도":"2017","주차":"36","연령대":"65세이상","의사환자 분율":"2.1"}]',
      ...
    },
    ...
  ]
}
```

## 2. 데이터 처리 시작 단계

```
📊 [useInfluenzaData] 데이터 병합 완료: {
  CSV건수: 2800,
  API건수: 50,
  전체건수: 2850
}
📊 [useInfluenzaData] 데이터 2850건 발견. 데이터 처리 중...
🔍 [processETLData] 시작 - rawData 개수: 2850
📦 [processETLData] 항목 0: parsedData 1개 행
  📄 [processETLData] 행 0: { 연도: '2017', 주차: '36', 연령대: '65세이상', 의사환자 분율: '2.1' }
    🔍 형식 2 확인 (주차: 36주, 연도: 2017): 연령대 필드 = "65세이상"
      ✅ 연령대 데이터 저장: 65세이상 = 2.1 (필드: 의사환자 분율)
    ✅ 형식 2 발견 (주차: 36주, 연령대: 65세이상): [{ key: '의사환자 분율', value: 2.1, used: true }]
...
```

## 3. 절기 계산 단계

```
📅 [processETLData] 발견된 절기 (필드 기반): []  // CSV 데이터에는 절기 필드가 없으므로 빈 배열
📅 [processETLData] 발견된 절기 (주차 기반): [
  '17/18절기',
  '18/19절기',
  '19/20절기',
  '20/21절기',
  '21/22절기',
  '22/23절기',
  '23/24절기',
  '24/25절기',
  '25/26절기'
]
📅 [processETLData] 주차->절기 매핑: [
  ['2017_36주', '17/18절기'],
  ['2017_37주', '17/18절기'],
  ['2017_38주', '17/18절기'],
  ...
  ['2018_36주', '17/18절기'],
  ['2018_37주', '18/19절기'],
  ...
  ['2025_36주', '24/25절기'],
  ['2025_37주', '24/25절기'],
  ...
]
```

## 4. 절기별 데이터 수집 단계

```
  🔍 [절기별] 절기 17/18절기에 속하는 주차들: [
    '36주', '37주', '38주', '39주', '40주', '41주', '42주', '43주', '44주', '45주', '46주', '47주', '48주', '49주', '50주', '51주', '52주', '53주',
    '1주', '2주', '3주', '4주', '5주', '6주', '7주', '8주', '9주', '10주', '11주', '12주', '13주', '14주', '15주', '16주', '17주', '18주', '19주', '20주', '21주', '22주', '23주', '24주', '25주', '26주', '27주', '28주', '29주', '30주', '31주', '32주', '33주', '34주', '35주'
  ]
  📊 [절기별] 절기 17/18절기, 주차 36주: {
    연령대수: 7,
    연령대별평균: [
      { ageGroup: '0세', avgValue: 3.9, rawValues: [3.9] },
      { ageGroup: '1-6세', avgValue: 6.7, rawValues: [6.7] },
      { ageGroup: '7-12세', avgValue: 6.3, rawValues: [6.3] },
      { ageGroup: '13-18세', avgValue: 8.2, rawValues: [8.2] },
      { ageGroup: '19-49세', avgValue: 5.7, rawValues: [5.7] },
      { ageGroup: '50-64세', avgValue: 2.9, rawValues: [2.9] },
      { ageGroup: '65세이상', avgValue: 2.1, rawValues: [2.1] }
    ],
    전체평균: 5.1
  }
  📊 [절기별] 절기 17/18절기, 주차 37주: {
    연령대수: 7,
    연령대별평균: [...],
    전체평균: 5.2
  }
  ...
  📈 절기 17/18절기: 52 주차에 데이터 있음

  🔍 [절기별] 절기 18/19절기에 속하는 주차들: [
    '36주', '37주', '38주', ...
  ]
  📊 [절기별] 절기 18/19절기, 주차 36주: {
    연령대수: 7,
    연령대별평균: [...],
    전체평균: 4.8
  }
  ...
  📈 절기 18/19절기: 52 주차에 데이터 있음

  ... (다른 절기들도 동일한 패턴)
```

## 5. 최종 결과 단계

```
asdf: {
  "17/18절기": {
    "weeks": ["36주", "37주", "38주", ..., "35주"],
    "values": [5.1, 5.2, 5.8, ..., 3.2]
  },
  "18/19절기": {
    "weeks": ["36주", "37주", "38주", ..., "35주"],
    "values": [4.8, 5.1, 5.5, ..., 2.9]
  },
  ...
  "24/25절기": {
    "weeks": ["36주", "37주", "38주", ..., "35주"],
    "values": [3.5, 3.8, 4.2, ..., 2.1]
  },
  "25/26절기": {
    "weeks": ["36주", "37주", "38주", ..., "47주"],
    "values": [3.2, 3.5, 3.9, ..., 4.1]
  }
}

✅ [processETLData] 최종 처리 결과: {
  주차수: 450,
  연령대수: 7,
  절기수: 9,
  연령대목록: ['0세', '1-6세', '7-12세', '13-18세', '19-49세', '50-64세', '65세이상'],
  절기목록: ['17/18절기', '18/19절기', '19/20절기', '20/21절기', '21/22절기', '22/23절기', '23/24절기', '24/25절기', '25/26절기']
}
```

## 6. Dashboard에서 절기별 차트 렌더링 단계

```
📅 [절기별 차트] 절기 17/18절기 데이터: {
  hasData: true,
  weeks: ['36주', '37주', '38주', ..., '35주'],
  values: [5.1, 5.2, 5.8, ..., 3.2],
  weeksCount: 52,
  valuesCount: 52
}
📅 [절기별 차트] 절기 18/19절기 데이터: {
  hasData: true,
  weeks: ['36주', '37주', '38주', ..., '35주'],
  values: [4.8, 5.1, 5.5, ..., 2.9],
  weeksCount: 52,
  valuesCount: 52
}
...
📊 [절기별 차트] 모든 주차 (정렬 전): Set(52) { '36주', '37주', ..., '35주' }
📊 [절기별 차트] 정렬된 주차: ['36주', '37주', '38주', ..., '52주', '53주', '1주', '2주', ..., '35주']
📊 [절기별 차트] 절기 17/18절기 데이터 매핑: {
  seasonDataWeeks: ['36주', '37주', ...],
  seasonDataValues: [5.1, 5.2, ...],
  sortedWeeks: ['36주', '37주', ...],
  seasonDataWeeksLength: 52,
  seasonDataValuesLength: 52
}
  주차 36주: weekIndex=0, value=5.1
  주차 37주: weekIndex=1, value=5.2
  ...
📊 [절기별 차트] 절기 17/18절기 최종 values: [5.1, 5.2, 5.8, ..., 3.2]
```

## 문제가 있을 때 확인할 포인트

1. **CSV 데이터가 로드되지 않는 경우:**
   - `📂 [CSV 로더] CSV 데이터 로드 완료: 총 0건` → CSV 파일 경로나 파일명 확인
   - `📂 [CSV 로더] 2017년 데이터: 0건` → 해당 연도 CSV 파일 확인

2. **절기가 계산되지 않는 경우:**
   - `📅 [processETLData] 발견된 절기 (주차 기반): []` → 연도 추출 로직 확인
   - `📅 [processETLData] 주차->절기 매핑: []` → 주차 파싱 로직 확인

3. **절기별 데이터가 수집되지 않는 경우:**
   - `🔍 [절기별] 절기 XX/XX절기에 속하는 주차들: []` → 해당 절기의 주차가 weekToSeasonMap에 없음
   - `📈 절기 XX/XX절기: 0 주차에 데이터 있음` → 해당 절기의 주차에 연령대 데이터가 없음

4. **주차 순서가 잘못된 경우:**
   - `📊 [절기별 차트] 정렬된 주차: ['1주', '2주', ..., '36주']` → sortWeeksBySeason 함수 확인


